{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\n\nconst galleryList = document.querySelector('.gallery');\nlet lightBox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 500,\n});\n\nexport function galleryTemplate(element) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = element;\n  return `\n   <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <ul class=\"gallery-body\">\n        <li class=\"info-box\">\n          <h3>Likes:</h3>\n          <p>${likes}</p>\n        </li>\n        <li class=\"info-box\">\n          <h3>Views:</h3>\n          <p>${views}</p>\n        </li>\n        <li class=\"info-box\">\n          <h3>Comments:</h3>\n          <p>${comments}</p>\n        </li>\n        <li class=\"info-box\">\n          <h3>Downloads:</h3>\n          <p>${downloads}</p>\n        </li>\n      </ul>\n    </li>`;\n}\n\nexport function renderGallery(elements) {\n  const markup = elements.hits\n    .map(element => {\n      return galleryTemplate(element);\n    })\n    .join('\\n');\n\n  galleryList.insertAdjacentHTML('beforeend', markup);\n\n  lightBox.refresh();\n}\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getGallery(queryName, page = 1, perPage = 15) {\n  const response = await axios.get('', {\n    params: {\n      key: '42386647-98f841b623ea7dc572c802671',\n      q: queryName,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page,\n      per_page: perPage,\n    },\n  });\n  return response.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { renderGallery } from './js/render-functions.js';\nimport { getGallery } from './js/pixabay-api.js';\n\nconst form = document.querySelector('.search-form');\nconst galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet currentPage = 1;\nlet query = '';\nlet totalPages = 0;\nconst perPage = 15;\n\nloadMoreBtn.classList.add('hidden');\nform.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n\n  galleryList.innerHTML = '';\n  query = event.target.elements.query.value.trim();\n\n  if (query === '') {\n    showNotification('Please enter a search query!');\n    return;\n  }\n\n  loader.classList.remove('hidden');\n  currentPage = 1;\n\n  try {\n    const data = await getGallery(query, currentPage);\n    totalPages = Math.ceil(data.totalHits / perPage);\n    loadMoreBtn.classList.remove('hidden');\n    handleGalleryResponse(data);\n  } catch (error) {\n    console.error(error);\n    showNotification('Failed to fetch images');\n  } finally {\n    loader.classList.add('hidden');\n  }\n}\n\nasync function onLoadMore() {\n  loader.classList.remove('hidden');\n  currentPage++;\n\n  try {\n    const data = await getGallery(query, currentPage);\n    handleGalleryResponse(data);\n    smoothScroll();\n  } catch (error) {\n    console.error(error);\n    showNotification('Failed to fetch images');\n  } finally {\n    loader.classList.add('hidden');\n  }\n}\n\nfunction handleGalleryResponse(data) {\n  if (data.hits.length === 0) {\n    showNotification(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n  } else {\n    renderGallery(data);\n  }\n\n  if (currentPage >= totalPages) {\n    loadMoreBtn.classList.add('hidden');\n    if (currentPage >= totalPages) {\n      showNotification(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } else {\n    loadMoreBtn.classList.remove('hidden');\n  }\n}\n\nfunction showNotification(message) {\n  iziToast.show({\n    message: message,\n    messageColor: '#fff',\n    backgroundColor: '#FF0000',\n    position: 'topRight',\n  });\n}\n\nfunction smoothScroll() {\n  const galleryItemHeight =\n    document.querySelector('.gallery-item').offsetHeight;\n  window.scrollBy({\n    top: galleryItemHeight * 2,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["galleryList","lightBox","SimpleLightbox","galleryTemplate","element","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderGallery","elements","markup","axios","getGallery","queryName","page","perPage","form","loader","loadMoreBtn","currentPage","query","totalPages","onFormSubmit","onLoadMore","event","showNotification","data","handleGalleryResponse","error","smoothScroll","message","iziToast","galleryItemHeight"],"mappings":"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"}