{"version":3,"file":"commonHelpers.js","sources":["../src/js/index.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.search-form');\nconst list = document.querySelector('.pictures-list');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.button-load');\n\nconst lightbox = new SimpleLightbox('.gallery-card a.gallary-card-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet search = null;\nlet totalResult = 0;\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  let searchImg = e.target.elements.input.value;\n  search = searchImg;\n  page = 1;\n\n  if (search.trim('') === '') {\n    return;\n  }\n\n  loader.style.display = 'flex';\n\n  if (lightbox) {\n    lightbox.close();\n    list.innerHTML = '';\n  }\n\n  setTimeout(() => {\n    getImg()\n      .then(data => {\n        totalResult = data.totalHits;\n        render(data.hits);\n        lightbox.refresh();\n        if (data.hits.length === 0) {\n          iziToast.error({\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            backgroundColor: 'red',\n            messageColor: 'white',\n          });\n          loadBtn.disabled = true;\n          loadBtn.style.display = 'none';\n          loadBtn.style.opacity = 0;\n          loadBtn.style.overflow = 'hidden';\n        } else {\n          loadBtn.disabled = false;\n          loadBtn.style.display = 'flex';\n          loadBtn.style.opacity = 1;\n          loadBtn.style.overflow = 'visible';\n        }\n      })\n      .catch(error => {\n        console.error('Помилка отримання зображень:', error);\n      })\n      .finally(() => {\n        loader.style.display = 'none';\n      });\n  }, 500);\n  btnChange();\n  e.target.reset();\n});\n\nlet page = 1;\nlet perPage = 15;\n\nloadBtn.addEventListener('click', async () => {\n  page += 1;\n  const data = await getImg();\n  render(data.hits);\n  lightbox.refresh();\n  btnChange();\n\n  const galleryCards = document.querySelectorAll('.gallery-card');\n  galleryCards.forEach(card => {\n    const cardSize = card.getBoundingClientRect();\n    window.scrollBy({\n      top: cardSize.height * 1.36,\n      behavior: 'smooth',\n    });\n  });\n});\n\nasync function getImg() {\n  const API_KEY = '42386647-98f841b623ea7dc572c802671';\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    per_page: perPage,\n    page: page,\n    q: search,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  const response = await axios.get(`https://pixabay.com/api/?${params}`);\n  return response.data;\n}\n\nfunction btnChange() {\n  const maxPage = Math.ceil(totalResult / perPage);\n  if (page === maxPage) {\n    iziToast.warning({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      backgroundColor: '#add8e6',\n      messageColor: 'white',\n    });\n    loadBtn.disabled = true;\n    loadBtn.style.display = 'none';\n    loadBtn.style.opacity = 0;\n    loadBtn.style.overflow = 'hidden';\n  }\n}\n\nfunction render(imgs) {\n  const markup = imgs\n    .map(img => {\n      return `<li class=\"gallery-card\">\n    <a class=\"gallary-card-link\" href=\"${img.largeImageURL}\">\n        <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n    <ul class=\"image-info\">\n            <li class=\"image-item-info\">\n            <p>Likes</p>\n            <p>${img.likes}</p>\n        </li>\n        <li class=\"image-item-info\">\n            <p>Views</p>\n            <p>${img.views}</p>\n        </li>\n        <li class=\"image-item-info\">\n            <p>Comments</p>\n            <p>${img.comments}</p>\n        </li>\n        <li class=\"image-item-info\">\n            <p>Downloads</p>\n            <p>${img.downloads}</p>\n        </li>\n    </ul>\n    </a>\n</li>`;\n    })\n    .join('');\n\n  list.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["form","list","loader","loadBtn","lightbox","SimpleLightbox","search","totalResult","e","page","getImg","data","render","iziToast","error","btnChange","perPage","card","cardSize","API_KEY","params","axios","maxPage","imgs","markup","img"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,cAAc,EAE/CC,EAAW,IAAIC,EAAe,oCAAqC,CACvE,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIC,EAAS,KACTC,EAAc,EAElBP,EAAK,iBAAiB,SAAUQ,GAAK,CACnCA,EAAE,eAAc,EAEhBF,EADgBE,EAAE,OAAO,SAAS,MAAM,MAExCC,EAAO,EAEHH,EAAO,KAAK,EAAE,IAAM,KAIxBJ,EAAO,MAAM,QAAU,OAEnBE,IACFA,EAAS,MAAK,EACdH,EAAK,UAAY,IAGnB,WAAW,IAAM,CACfS,EAAQ,EACL,KAAKC,GAAQ,CACZJ,EAAcI,EAAK,UACnBC,EAAOD,EAAK,IAAI,EAChBP,EAAS,QAAO,EACZO,EAAK,KAAK,SAAW,GACvBE,EAAS,MAAM,CACb,QACE,2EACF,SAAU,WACV,gBAAiB,MACjB,aAAc,OAC1B,CAAW,EACDV,EAAQ,SAAW,GACnBA,EAAQ,MAAM,QAAU,OACxBA,EAAQ,MAAM,QAAU,EACxBA,EAAQ,MAAM,SAAW,WAEzBA,EAAQ,SAAW,GACnBA,EAAQ,MAAM,QAAU,OACxBA,EAAQ,MAAM,QAAU,EACxBA,EAAQ,MAAM,SAAW,UAEnC,CAAO,EACA,MAAMW,GAAS,CACd,QAAQ,MAAM,+BAAgCA,CAAK,CAC3D,CAAO,EACA,QAAQ,IAAM,CACbZ,EAAO,MAAM,QAAU,MAC/B,CAAO,CACJ,EAAE,GAAG,EACNa,IACAP,EAAE,OAAO,QACX,CAAC,EAED,IAAIC,EAAO,EACPO,EAAU,GAEdb,EAAQ,iBAAiB,QAAS,SAAY,CAC5CM,GAAQ,EACR,MAAME,EAAO,MAAMD,IACnBE,EAAOD,EAAK,IAAI,EAChBP,EAAS,QAAO,EAChBW,IAEqB,SAAS,iBAAiB,eAAe,EACjD,QAAQE,GAAQ,CAC3B,MAAMC,EAAWD,EAAK,wBACtB,OAAO,SAAS,CACd,IAAKC,EAAS,OAAS,KACvB,SAAU,QAChB,CAAK,CACL,CAAG,CACH,CAAC,EAED,eAAeR,GAAS,CACtB,MAAMS,EAAU,qCAEVC,EAAS,IAAI,gBAAgB,CACjC,IAAKD,EACL,SAAUH,EACV,KAAMP,EACN,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAGD,OADiB,MAAMe,EAAM,IAAI,4BAA4BD,CAAM,EAAE,GACrD,IAClB,CAEA,SAASL,GAAY,CACnB,MAAMO,EAAU,KAAK,KAAKf,EAAcS,CAAO,EAC3CP,IAASa,IACXT,EAAS,QAAQ,CACf,QAAS,6DACT,SAAU,WACV,gBAAiB,UACjB,aAAc,OACpB,CAAK,EACDV,EAAQ,SAAW,GACnBA,EAAQ,MAAM,QAAU,OACxBA,EAAQ,MAAM,QAAU,EACxBA,EAAQ,MAAM,SAAW,SAE7B,CAEA,SAASS,EAAOW,EAAM,CACpB,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA,yCAC4BA,EAAI,aAAa;AAAA,oBACtCA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,iBAIrCA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,iBAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,iBAITA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,iBAIZA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,MAKzB,EACA,KAAK,EAAE,EAEVxB,EAAK,mBAAmB,YAAauB,CAAM,CAC7C"}